"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[553],{2789:(t,e)=>{e.A=(t,e)=>{const o=t.__vccOpts||t;for(const[t,d]of e)o[t]=d;return o}},7406:(t,e,o)=>{o.r(e),o.d(e,{comp:()=>c,data:()=>a});var d=o(7829);const r=[(0,d.Fv)('<h1 id="私有部署" tabindex="-1"><a class="header-anchor" href="#私有部署"><span><a href="https://twikoo.js.org/backend.html#%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2" target="_blank" rel="noopener noreferrer">私有部署</a></span></a></h1><blockquote><p>注意 私有部署的环境需配合 1.6.0 或以上版本的 twikoo.js 使用 私有部署对服务器系统没有要求，Windows、Ubuntu、CentOS、macOS 等常用系统均支持。 私有部署涉及终端操作、申请证书、配置反向代理或负载均衡等高级操作，如果对这些不太了解，建议优先选择其他方式部署。</p></blockquote><ol><li>服务端下载安装 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">Node.js</a></li><li>安装 Twikoo server: <code>npm i -g tkserver</code></li><li>根据需要配置环境变量，所有的环境变量都是可选的</li></ol><table><thead><tr><th>名称</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>MONGODB_URI</code></td><td>MongoDB 数据库连接字符串，不传则使用 lokijs</td><td><code>null</code></td></tr><tr><td><code>MONGO_URL</code></td><td>MongoDB 数据库连接字符串，不传则使用 lokijs</td><td><code>null</code></td></tr><tr><td><code>TWIKOO_DATA</code></td><td>lokijs 数据库存储路径</td><td><code>./data</code></td></tr><tr><td><code>TWIKOO_PORT</code></td><td>端口号</td><td><code>8080</code></td></tr><tr><td><code>TWIKOO_THROTTLE</code></td><td>IP 请求限流，当同一 IP 短时间内请求次数超过阈值将对该 IP 返回错误</td><td><code>250</code></td></tr><tr><td><code>TWIKOO_LOCALHOST_ONLY</code></td><td>为true时只监听本地请求，使得 nginx 等服务器反代之后不暴露原始端口</td><td><code>null</code></td></tr><tr><td><code>TWIKOO_LOG_LEVEL</code></td><td>日志级别，支持 <code>verbose / info / warn / error</code></td><td><code>info</code></td></tr><tr><td><code>TWIKOO_IP_HEADERS</code></td><td>在一些特殊情况下使用，如使用了 <code>CloudFlare CDN</code> 它会将请求 <code>IP</code> 写到请求头的 <code>cf-connecting-ip</code> 字段上，为了能够正确的获取请求 IP 你可以写成 <code>[&quot;headers.cf-connecting-ip&quot;]</code></td><td><code>[]</code></td></tr></tbody></table><ol start="4"><li>启动 Twikoo server: <code>tkserver</code></li><li>访问 <code>http://服务端IP:8080</code> 测试服务是否启动成功</li><li>配置前置代理实现 HTTPS 访问（可以用 Nginx、负载均衡或 Cloudflare 等）</li><li>到博客配置文件中配置 envId 为 https:// 加域名（例如 https://twikoo.yourdomain.com）</li></ol><blockquote><h2 id="提示" tabindex="-1"><a class="header-anchor" href="#提示"><span>提示</span></a></h2><p>Linux 服务器可以用 nohup tkserver &gt;&gt; tkserver.log 2&gt;&amp;1 &amp; 命令后台启动 数据默认在 data 目录，请注意定期备份数据 默认端口为8080，自定义端口使用可使用 TWIKOO_PORT=1234 tkserver 启动。 配置systemctl服务配合TWIKOO_PORT=1234 tkserver设置开机启动</p></blockquote>',6)],n={},c=(0,o(2789).A)(n,[["render",function(t,e){return(0,d.uX)(),(0,d.CE)("div",null,r)}]]),a=JSON.parse('{"path":"/posts/2024-09-13-blog_tkserver.html","title":"私有部署twikoo","lang":"zh-CN","frontmatter":{"title":"私有部署twikoo","category":["网站评论系统"],"tag":["twikoo"],"sticky":false,"star":false,"order":-0.01,"description":"私有部署 注意 私有部署的环境需配合 1.6.0 或以上版本的 twikoo.js 使用 私有部署对服务器系统没有要求，Windows、Ubuntu、CentOS、macOS 等常用系统均支持。 私有部署涉及终端操作、申请证书、配置反向代理或负载均衡等高级操作，如果对这些不太了解，建议优先选择其他方式部署。 服务端下载安装 Node.js 安装 Twi...","head":[["meta",{"property":"og:url","content":"https://newzone.top/posts/2024-09-13-blog_tkserver.html"}],["meta",{"property":"og:site_name","content":"LearnData 开源笔记"}],["meta",{"property":"og:title","content":"私有部署twikoo"}],["meta",{"property":"og:description","content":"私有部署 注意 私有部署的环境需配合 1.6.0 或以上版本的 twikoo.js 使用 私有部署对服务器系统没有要求，Windows、Ubuntu、CentOS、macOS 等常用系统均支持。 私有部署涉及终端操作、申请证书、配置反向代理或负载均衡等高级操作，如果对这些不太了解，建议优先选择其他方式部署。 服务端下载安装 Node.js 安装 Twi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-13T12:35:52.000Z"}],["meta",{"property":"article:author","content":"LearnData"}],["meta",{"property":"article:tag","content":"twikoo"}],["meta",{"property":"article:modified_time","content":"2024-09-13T12:35:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"私有部署twikoo\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-09-13T12:35:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LearnData\\",\\"url\\":\\"https://newzone.top\\"}]}"]]},"headers":[],"git":{"createdTime":1726230952000,"updatedTime":1726230952000,"contributors":[{"name":"lengxc","email":"lengxc@qiysd.com","commits":1}]},"readingTime":{"minutes":2.16,"words":647},"filePathRelative":"_posts/2024-09-13-blog_tkserver.md","localizedDate":"2024年9月13日","excerpt":"\\n<blockquote>\\n<p>注意\\n私有部署的环境需配合 1.6.0 或以上版本的 twikoo.js 使用\\n私有部署对服务器系统没有要求，Windows、Ubuntu、CentOS、macOS 等常用系统均支持。\\n私有部署涉及终端操作、申请证书、配置反向代理或负载均衡等高级操作，如果对这些不太了解，建议优先选择其他方式部署。</p>\\n</blockquote>\\n<ol>\\n<li>服务端下载安装 <a href=\\"https://nodejs.org/zh-cn/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Node.js</a></li>\\n<li>安装 Twikoo server: <code>npm i -g tkserver</code></li>\\n<li>根据需要配置环境变量，所有的环境变量都是可选的</li>\\n</ol>","autoDesc":true}')}}]);